import{e as ne,Q as Z,R as le,S as ue,T as ce,U as ge,V as de,a as N,s as q,W as pe,k as x,w as G,P as _,i as t,o as s,m as V,r as E,c as z,h as f,N as J,X as me,Y as ee,Z as fe,H as M,$ as ve,a0 as he,a1 as be,f as ye,g as _e,q as xe,l as y,D as R,t as ze,a2 as ie,a3 as Ie,E as ke,p as we,n as Ce,a4 as je}from"./C3KKrbky.js";import{_ as Be}from"./DlAUqK2U.js";const Ae={slots:{root:"relative inline-flex items-center",base:["w-full rounded-[calc(var(--ui-radius)*1.5)] border-0 placeholder:text-(--ui-text-dimmed) focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-(--ui-text-dimmed)",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-(--ui-text-dimmed)"},variants:{buttonGroup:{horizontal:{root:"group",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-(--ui-text-highlighted) bg-(--ui-bg) ring ring-inset ring-(--ui-border-accented)",soft:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated)/50 hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-(--ui-bg-elevated)/50",subtle:"text-(--ui-text-highlighted) bg-(--ui-bg-elevated) ring ring-inset ring-(--ui-border-accented)",ghost:"text-(--ui-text-highlighted) bg-transparent hover:bg-(--ui-bg-elevated) focus:bg-(--ui-bg-elevated) disabled:bg-transparent dark:disabled:bg-transparent",none:"text-(--ui-text-highlighted) bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-(--ui-text-muted) file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-primary)"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-secondary)"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-success)"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-info)"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-warning)"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-error)"},{color:"primary",highlight:!0,class:"ring ring-inset ring-(--ui-primary)"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-(--ui-secondary)"},{color:"success",highlight:!0,class:"ring ring-inset ring-(--ui-success)"},{color:"info",highlight:!0,class:"ring ring-inset ring-(--ui-info)"},{color:"warning",highlight:!0,class:"ring ring-inset ring-(--ui-warning)"},{color:"error",highlight:!0,class:"ring ring-inset ring-(--ui-error)"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-(--ui-border-inverted)"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-(--ui-border-inverted)"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Ve=["id","type","value","name","placeholder","disabled","required","autocomplete"],Ne=fe;var te;const Pe=ee({extend:ee(Ae),...((te=Ne.ui)==null?void 0:te.input)||{}}),Se=ne({inheritAttrs:!1,__name:"Input",props:Z({as:{},id:{},name:{},type:{default:"text"},placeholder:{},color:{},variant:{},size:{},required:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},autofocusDelay:{default:0},disabled:{type:Boolean},highlight:{type:Boolean},class:{},ui:{},icon:{},avatar:{},leading:{type:Boolean},leadingIcon:{},trailing:{type:Boolean},trailingIcon:{},loading:{type:Boolean},loadingIcon:{}},{modelValue:{},modelModifiers:{}}),emits:Z(["update:modelValue","blur","change"],["update:modelValue"]),setup(p,{expose:u,emit:l}){const i=p,c=l,n=le(),[o,a]=ue(p,"modelValue"),{emitFormBlur:v,emitFormInput:h,emitFormChange:r,size:P,color:j,id:B,name:S,highlight:b,disabled:g,emitFormFocus:I,ariaAttrs:$}=ce(i,{}),{orientation:k,size:F}=ge(i),{isLeading:w,isTrailing:A,leadingIconName:D,trailingIconName:L}=de(i),T=N(()=>F.value||P.value),d=N(()=>Pe({type:i.type,color:j.value,variant:i.variant,size:T==null?void 0:T.value,loading:i.loading,highlight:b.value,leading:w.value||!!i.avatar||!!n.leading,trailing:A.value||!!n.trailing,buttonGroup:k.value})),U=q(null);function ae(){var e;i.autofocus&&((e=U.value)==null||e.focus())}function K(e){a.trim&&(e=(e==null?void 0:e.trim())??null),(a.number||i.type==="number")&&(e=he(e)),a.nullify&&(e||(e=null)),o.value=e,h()}function se(e){a.lazy||K(e.target.value)}function oe(e){const C=e.target.value;a.lazy&&K(C),a.trim&&(e.target.value=C.trim()),r(),c("change",e)}function re(e){v(),c("blur",e)}return u({inputRef:U}),pe(()=>{setTimeout(()=>{ae()},i.autofocusDelay)}),(e,C)=>{var H;return s(),x(t(me),{as:e.as,class:_(d.value.root({class:[i.class,(H=i.ui)==null?void 0:H.root]}))},{default:G(()=>{var O,Q,W;return[V("input",J({id:t(B),ref_key:"inputRef",ref:U,type:e.type,value:t(o),name:t(S),placeholder:e.placeholder,class:d.value.base({class:(O=i.ui)==null?void 0:O.base}),disabled:t(g),required:e.required,autocomplete:e.autocomplete},{...e.$attrs,...t($)},{onInput:se,onBlur:re,onChange:oe,onFocus:C[0]||(C[0]=(...m)=>t(I)&&t(I)(...m))}),null,16,Ve),E(e.$slots,"default"),t(w)||e.avatar||n.leading?(s(),z("span",{key:0,class:_(d.value.leading({class:(Q=i.ui)==null?void 0:Q.leading}))},[E(e.$slots,"leading",{},()=>{var m,X,Y;return[t(w)&&t(D)?(s(),x(M,{key:0,name:t(D),class:_(d.value.leadingIcon({class:(m=i.ui)==null?void 0:m.leadingIcon}))},null,8,["name","class"])):e.avatar?(s(),x(ve,J({key:1,size:((X=i.ui)==null?void 0:X.leadingAvatarSize)||d.value.leadingAvatarSize()},e.avatar,{class:d.value.leadingAvatar({class:(Y=i.ui)==null?void 0:Y.leadingAvatar})}),null,16,["size","class"])):f("",!0)]})],2)):f("",!0),t(A)||n.trailing?(s(),z("span",{key:1,class:_(d.value.trailing({class:(W=i.ui)==null?void 0:W.trailing}))},[E(e.$slots,"trailing",{},()=>{var m;return[t(L)?(s(),x(M,{key:0,name:t(L),class:_(d.value.trailingIcon({class:(m=i.ui)==null?void 0:m.trailingIcon}))},null,8,["name","class"])):f("",!0)]})],2)):f("",!0)]}),_:3},8,["as","class"])}}}),$e=Object.assign(Se,{__name:"UInput"});function Fe(p){const{projects:u}=be(),l=N(()=>u.value.find(n=>n.id===p));function i(n){l.value&&(u.value=u.value.map(o=>o.id===p?{...o,...n}:o))}async function c(n){if(!l.value)return;const o={...l.value};i(n);try{const a=await $fetch(`/api/projects/${p}`,{method:"PUT",body:{...n}});return i(a),a}catch(a){console.error("Error updating project",a),i(o)}}return{project:l,updateProject:c}}const Te={class:"container"},Ue={key:0,class:"header"},Ee={class:"header-left"},Re={class:"title-container"},qe={key:1,class:"edit-container"},Ge={class:"edit-actions"},Me=ne({__name:"[projectId]",async setup(p){let u,l;const i=ye(),c=i.params.projectId,{project:n,updateProject:o}=Fe(c),{createChatAndNavigate:a}=_e();n.value||([u,l]=xe(()=>Ce("/",{replace:!0})),await u,l());const v=N(()=>i.params.id),h=q(!1),r=q("");function P(){!n.value||v.value||(r.value=n.value.name,h.value=!0)}function j(){h.value=!1,r.value=""}async function B(){if(!(!r.value.trim()||!n.value)&&r.value.trim()!==n.value.name){h.value=!1;try{await o({name:r.value.trim()})}catch(b){console.error("Failed to rename project:",b)}}}async function S(){try{await a({projectId:c})}catch(b){console.error("Failed to create new chat:",b)}}return(b,g)=>{const I=M,$=$e,k=ke,F=we,w=je;return s(),z("div",Te,[t(n)?(s(),z("div",Ue,[V("div",Ee,[V("div",Re,[t(h)?(s(),z("div",qe,[y($,{modelValue:t(r),"onUpdate:modelValue":g[0]||(g[0]=A=>Ie(r)?r.value=A:null),class:"title-input",size:"lg",autofocus:"",onKeyup:[ie(B,["enter"]),ie(j,["esc"])]},null,8,["modelValue"]),V("div",Ge,[y(k,{color:"neutral",variant:"soft",icon:"i-heroicons-x-mark",size:"xs",onClick:j}),y(k,{color:"primary",variant:"soft",icon:"i-heroicons-check",size:"xs",onClick:B})])])):(s(),z("h1",{key:0,class:_(["title",{"cursor-pointer":!t(v)}]),onClick:P},[R(ze(t(n).name)+" ",1),t(v)?f("",!0):(s(),x(I,{key:0,name:"i-heroicons-pencil",class:"edit-icon"}))],2))]),t(v)?(s(),x(F,{key:0,to:`/projects/${t(c)}`,class:"leading-4 flex items-center mt-1 text-sm text-(--ui-text-muted)"},{default:G(()=>[y(I,{name:"i-heroicons-arrow-left",class:"mr-1"}),g[1]||(g[1]=R(" Back to Project "))]),_:1,__:[1]},8,["to"])):f("",!0)]),y(k,{color:"primary",icon:"i-heroicons-plus",onClick:S},{default:G(()=>g[2]||(g[2]=[R(" New Chat in Project ")])),_:1,__:[2]})])):f("",!0),y(w)])}}}),Ke=Be(Me,[["__scopeId","data-v-c418628a"]]);export{Ke as default};
